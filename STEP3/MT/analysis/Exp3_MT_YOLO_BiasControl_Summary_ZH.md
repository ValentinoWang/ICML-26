# 实验三初步结论小结：MT 工业检测场景中的 YOLO + 偏置锚定

> 本文档对应整体实验方案中的「实验三：工业检测场景（MT + YOLO/DAN）」部分，聚焦当前已经完成的 **YOLO + $L_{\text{bias}}$（偏置锚定）** 实验结果，作为论文撰写时的初步结论草稿。

当前阶段尚未接入样本过滤器 $g_\phi$，因此这里的“偏置控制”主要指锚点约束 $L_{\text{bias}}$，可视为完整框架中的第一步。

---

## 1. 实验设置简述

- 数据：
  - 源域：MT-src-dataset（完整源域）；
  - 目标域：MT-tgt-split 的 four-scenario：few-shot / small / medium / high；
  - 统一测试集：MT-tgt_global_test。
- 模型与初始化：
  - 基线 YOLOv12 检测模型；
  - 锚点 $\theta_{\text{good}}$：在源域完整数据上训练得到的 shared_pretrain 模型（seed 1088）。
- 对比方法：
  - Target-Only：只在目标域各场景上训练；
  - Pretrain-Finetune-only：源预训练 + 目标域微调；
  - YOLO + $L_{\text{bias}}$：以 $\theta_{\text{good}}$ 为锚点，在目标域上训练时加入
    $$
    L_{\text{bias}} = \big\lVert \theta_{\text{new}} - \theta_{\text{good}} \big\rVert^2.
    $$
- 评价：
  - 主指标：目标域统一测试集 mAP50（多 seed 平均 ± 标准差）；
  - 偏置度量：训练结束时的 $L_{\text{bias}}$ 数值（记作 bias_loss）。

实验均在三个随机种子（1088 / 2195 / 4960）下重复。

- 作为统一参照的 **Source-only**（仅源域训练，在 MT-tgt_global_test 上直接测试）表现为：  
  mAP50 ≈ **0.366 ± 0.017**，mAP50-95 ≈ **0.212 ± 0.010**，Precision ≈ **0.532 ± 0.077**，Recall ≈ **0.331 ± 0.007**。

---

## 2. mAP50 性能与稳定性（四个场景对比）

### 2.1 few-shot：极小样本 + 显式偏置的困难场景

三种方法的 mAP50（统一测试集）统计如下（3 seed 平均 ± std）：

- Target-Only：**0.152 ± 0.114**
  - 其中一个 seed 的 mAP50 几乎为 0（训练完全崩溃），std 极大。
- Pretrain-Finetune-only：**0.286 ± 0.112**
- YOLO + $L_{\text{bias}}$：**0.390 ± 0.037**
  - 三个 seed 的 mAP50 分别约为 0.364 / 0.364 / 0.443。

**几点结论：**

- 性能层面：  
  - 相较 Target-Only（0.15）和 Fine-tune-only（0.29），YOLO + $L_{\text{bias}}$ 将 few-shot 场景的 mAP50 明显拉升到约 **0.39**，绝对提升分别约 **+0.24 / +0.10**。
- 稳定性层面：  
  - Target-Only / Fine-tune-only 在 few-shot 下表现极不稳定，存在训练直接“挂零”的 seed；  
  - 加入 $L_{\text{bias}}$ 后，三次训练 run 全部落在 0.36–0.44 的区间内，std 从 ~0.11 收紧到 ~0.04，没有再出现“崩盘 seed”。

**论文可写结论（few-shot）：**

- 在偏置严重且样本极少的 few-shot 场景下，传统 Target-Only 与 Fine-tuning 极易“跑崩”，性能和稳定性高度依赖随机种子；  
- 引入锚点正则 $L_{\text{bias}}$ 后，所有种子均收敛到一个中高性能区间，mAP50 提升且方差显著减小，说明偏置控制有效抑制了坏样本引起的灾难性偏移，使训练回到“可控偏置”框架下更稳定的收敛行为。

### 2.2 small：样本略多但仍有偏的场景

small 场景结果：

- Target-Only：**0.633 ± 0.007**
- Pretrain-Finetune-only：**0.466 ± 0.131**
- YOLO + $L_{\text{bias}}$：**0.925 ± 0.006**
  - 三个 seed 的 mAP50 分别约为 0.918 / 0.932 / 0.926。

**几点结论：**

- 性能：从 0.63（Target-Only）与 0.47（Fine-tune-only）直接抬到 **0.93** 左右，绝对提升 0.3~0.46，属于“量级级”的改善；  
- 稳定性：  
  - Target-Only 虽然 std 小，但停在一个明显偏低的 plateau；  
  - Fine-tune-only 方差较大；  
  - YOLO + $L_{\text{bias}}$ 既达到远高于两者的 mAP50，又在三个 seed 上保持极小方差（~0.006）。

**论文可写结论（small）：**

- 在 small 场景中，偏置控制不仅带来了显著的性能提升，同时保持高度稳定的收敛行为；  
- 从 “0.63 ± 0.01” 到 “0.93 ± 0.01”，说明在目标域信息略微充足但仍有偏的情况下，锚点正则可以帮助模型充分利用 $\theta_{\text{good}}$ 作为“良好起点 + 稳定器”，显著改善最终的检测性能。

### 2.3 medium：中等规模目标域

medium 场景结果：

- Target-Only：**0.875 ± 0.008**
- Pretrain-Finetune-only：**0.770 ± 0.067**
- YOLO + $L_{\text{bias}}$：**0.938 ± 0.001**
  - 三个 seed 的 mAP50 约为 0.936 / 0.940 / 0.939。

**结论：**

- Target-Only 在 medium 上本身已经不差（0.875），但 YOLO + $L_{\text{bias}}$ 仍能进一步提升到 ~0.94，且几乎无方差；  
- 说明在中等规模的目标域下，偏置控制不再只是防止崩溃，而是能帮助模型在“更好的参数邻域”内搜索到更高质量的解。

### 2.4 high：接近充分标注场景

high 场景结果：

- Target-Only：**0.942 ± 0.004**
- Pretrain-Finetune-only：**0.889 ± 0.010**
- YOLO + $L_{\text{bias}}$：**0.964 ± 0.001**
  - 三个 seed 的 mAP50 约为 0.965 / 0.962 / 0.964。

**结论：**

- 在 high 场景，Target-Only mAP 已接近“天花板”，但 YOLO + $L_{\text{bias}}$ 仍有稳定的小幅提升（0.94 → 0.96），且几乎无方差；  
- 这说明当锚点 $\theta_{\text{good}}$ 质量较高、目标域样本也充足时，锚点正则不会拖累性能，反而可以在细节上进一步提升泛化表现。

---

## 3. 锚点距离（bias_loss）随场景的变化

不同场景下，最终 $L_{\text{bias}}$ 数值（bias_loss）的典型量级为：

- few-shot：约 $3.6\\times 10^3 \\sim 4.0\\times 10^3$；
- small：约 $5.3\\times 10^3 \\sim 5.6\\times 10^3$；
- medium：约 $6.2\\times 10^3 \\sim 6.9\\times 10^3$；
- high：约 $1.4\\times 10^4 \\sim 1.7\\times 10^4$。

**解读：**

- few-shot：模型被更强地约束在 $\theta_{\text{good}}$ 附近，主要作用是防止在小样本、高偏置的情况下“被坏样本拖崩”；  
- 随着目标域样本增多（small / medium / high），模型在 $L_{\text{bias}}$ 的约束下允许**适度远离锚点**，去拟合目标域的新信息，同时仍保持在一个可控的邻域内，不会偏离“源域合理解”太远。

**论文可写句式：**

> 随着目标域样本规模从 few-shot 到 high 逐步增加，模型与锚点之间的偏置距离（bias_loss）也逐渐增大，表明在偏置控制下，模型会在“锚点邻域”内自适应地寻找新的平衡点：在极小样本场景中更紧贴 $\theta_{\text{good}}$ 以保证稳定性，在中高样本场景中适度偏离以获取更高的目标域性能。

---

## 4. 与整体可控偏置理论的对应关系（工业 Case Study 视角）

结合实验方案中的理论与整体结构，当前 MT + YOLO + $L_{\text{bias}}$ 的结果可以作为“工业 Case Study”的初步支撑，主要体现在：

1. **在极端有偏小样本（few-shot）下恢复稳定收敛：**
   - 传统训练在 few-shot 场景下极其不稳定，表现高度依赖 seed，甚至出现完全崩溃；
   - 加入锚点正则后，三个 seed 的性能集中在一个中等偏上的区间，说明“有偏递归训练”被有效地拉回了一个可控的收敛轨迹。

2. **在 small / medium 场景中显著提升性能：**
   - 偏置控制不再只是“救火”，而是实实在在带来了 large margin 的性能提升（0.63 → 0.93，0.88 → 0.94），这一点在工业检测场景中非常有说服力。

3. **在高数据量场景中，不会拖累甚至略有收益：**
   - 当目标域标注充分时，$L_{\text{bias}}$ 仍能在不破坏收敛的前提下带来小幅提升，说明在“锚点质量较好”的现实场景中，该正则项是“安全”的。

4. **锚点距离的场景依赖行为与理论一致：**
   - few-shot 中偏置距离最小，small / medium / high 中逐步增大，对应理论上“随着信息增多，允许更远离锚点但仍处于可控偏置”的直观图景。

综上，当前 YOLO + $L_{\text{bias}}$ 的实验结果已经可以作为实验三中的一个强 Case Study：  
**在真实工业检测任务上，简单而通用的锚点偏置控制就能显著提升性能并大幅提高训练稳定性。**

后续如果在此基础上进一步加入样本过滤器 $g_\phi$，并与 YOLO baseline（无偏置控制）做四路对比（Baseline / +$L_{\text{bias}}$ / +$g_\phi$ / 完整方法），可以将这部分结论升级为“完整可控偏置框架在工业场景中的落地验证”。
